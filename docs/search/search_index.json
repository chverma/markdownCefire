{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Inici","text":""},{"location":"#3-servei-dhcp","title":"3. Servei DHCP","text":"<p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"#navegacio","title":"Navegaci\u00f3","text":"<ul> <li>Objectius</li> <li>Continguts</li> <li>1. Introducci\u00f3</li> <li>2. Configuraci\u00f3 dels equips de la xarxa</li> <li>3. El model funcional DHCP</li> <li>4. Intervals, exclusions, concessions i reserves</li> <li>5. Opcions addicionals del protocol</li> <li>6. Problemes del servei</li> <li>Instal\u00b7laci\u00f3 d'un servidor DHCP</li> <li>Activitats</li> <li>Pr\u00e0ctiques</li> </ul>"},{"location":"1_introducci/","title":"1. Introducci\u00f3","text":""},{"location":"1_introducci/#1-introduccio","title":"1. Introducci\u00f3","text":""},{"location":"1_introducci/#exemples-dus-del-servei-dhcp","title":"Exemples d'\u00fas del servei DHCP","text":"<p>Els seg\u00fcents s\u00f3n alguns exemples d\u2019\u00fas del servei DHCP:</p> <ul> <li>En una biblioteca que admet connexions Wi-Fi, els clients obtindran concessions per a un temps redu\u00eft, per exemple, minuts.</li> <li>Un usuari d\u2019Internet que rep al seu equip de casa una adre\u00e7a IP din\u00e0mica del seu prove\u00efdor d\u2019acc\u00e9s a Internet (ISP) tindr\u00e0 una concessi\u00f3 que segurament ser\u00e0 per hores.</li> <li>En la xarxa corporativa d\u2019una empresa que s\u2019ha configurat din\u00e0micament usant DHCP, els equips rebran concessions din\u00e0miques per per\u00edodes de temps molt llargs, per exemple, dies.</li> </ul> <p>DHCP \u00e9s l\u2019acr\u00f2nim de dynamic host configuration protocol, en catal\u00e0, protocol de configuraci\u00f3 din\u00e0mica d\u2019equips. El servei DHCP permet la configuraci\u00f3 d\u2019adreces IP, m\u00e0scares, passarel\u00b7les per defecte i moltes altres opcions de configuraci\u00f3 de manera totalment din\u00e0mica.</p> <p>Qu\u00e8 fa el DHCP?</p> <p>Una forma planera d\u2019entendre el DHCP \u00e9s imaginar que els equips de client en arrencar fan un crit per la xarxa i pregunten \u201cque hi ha alg\u00fa?\u201d, \u201cqui s\u00f3c jo?\u201d. El servidor de DHCP els contesta proporcionant-los tota la informaci\u00f3 necess\u00e0ria perqu\u00e8 s\u00e0piguen qui s\u00f3n i com han de configurar els seus par\u00e0metres de xarxa.</p> <p>El servei DHCP proporciona un mecanisme de configuraci\u00f3 centralitzat dels equips de la xarxa. En lloc de configurar un per un els equips de xarxa amb adreces i valors est\u00e0tics, un servidor DHCP anir\u00e0 assignant als equips clients els valors que els corresponguin. Aquesta assignaci\u00f3 es fa per un per\u00edode de temps finit, passat el qual caldr\u00e0 renovar-se.</p> <p>Avantatges DHCP</p> <p>El servei DHCP t\u00e9 diversos avantatges:</p> <ul> <li>Evita errors i conflictes IP.</li> <li>Centralitza l\u2019administraci\u00f3.</li> <li>Estalvia temps.</li> <li>Simplifica l\u2019administraci\u00f3.</li> </ul> <p>Els principals avantatges d\u2019utilitzar DHCP s\u00f3n: d\u2019una banda, evitar conflictes d\u2019adreces IP (adreces repetides i adreces err\u00f2nies), ja que passar equip per equip a canviar la configuraci\u00f3 \u00e9s molt m\u00e9s pesat i propens a l\u2019error que fer-ho editant un sol fitxer de configuraci\u00f3 en el servidor DHCP; i, d\u2019altra banda, poder fer l\u2019administraci\u00f3 centralitzada representa un estalvi de temps i de feina.</p> <p>El servei DHCP simplifica l\u2019administraci\u00f3 de la configuraci\u00f3 dels equips de xarxa fent-la centralitzada, din\u00e0mica i amb concessions per per\u00edodes de temps finits.</p> <p>La concessi\u00f3 din\u00e0mica d\u2019adreces IP i altres par\u00e0metres de configuraci\u00f3 de xarxa es realitza per a un per\u00edode de temps determinat, que varia en funci\u00f3 de les necessitats del client i del servidor.</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"2_configuraci_dels_equips_de_la_xarxa/","title":"2. Configuraci\u00f3 dels equips de la xarxa","text":""},{"location":"2_configuraci_dels_equips_de_la_xarxa/#2-configuracio-dels-equips-de-la-xarxa","title":"2. Configuraci\u00f3 dels equips de la xarxa","text":""},{"location":"2_configuraci_dels_equips_de_la_xarxa/#configuracio-dun-equip-de-xarxa","title":"Configuraci\u00f3 d'un equip de xarxa","text":"<p>Qualsevol equip que pertany a una xarxa requereix que es configuri amb uns par\u00e0metres m\u00ednims, que s\u00f3n l\u2019adre\u00e7a IP, la m\u00e0scara i la porta d\u2019enlla\u00e7 per defecte. L\u2019adre\u00e7a IP identifica l\u2019equip de manera \u00fanica, i la m\u00e0scara permet determinar la xarxa o subxarxa en qu\u00e8 es troba l\u2019equip. Amb aquests dos par\u00e0metres n\u2019hi ha prou per tenir connectivitat en la xarxa. Si es vol disposar d\u2019acc\u00e9s fora de la xarxa pr\u00f2pia (per exemple, a Internet o a la resta de la xarxa corporativa) cal definir tamb\u00e9 la porta d\u2019enlla\u00e7 predeterminada. A part de la configuraci\u00f3 b\u00e0sica, els equips poden necessitar m\u00e9s par\u00e0metres de configuraci\u00f3 com, per exemple: el nom del host, el servidor DNS, el fitxer d\u2019iniciaci\u00f3 a baixar, etc.</p> <p>Exemple de configuraci\u00f3 de xarxa d'un equip de casa:</p> <pre><code>Direcci\u00f3 IP. . . . . . . . . . . : 192.168.1.33\nM\u00e0scara de subred . . . . . . . . : 255.255.255.0\nPuerta de enlace predeterminada.. : 192.168.1.1\nServidor DHCP . . . . . . . . . . : 192.168.1.1\nServidors DNS . . . . . . . . .  : 80.58.61.250 80.58.61.254\n</code></pre> <p>La configuraci\u00f3 est\u00e0tica implica configurar els equips un a un. Fins i tot encara que es tingui acc\u00e9s remot als equips (per Telnet o SSH), com que cal modificar la configuraci\u00f3 de xarxa no es pot fer assegut des de l\u2019equip de l\u2019administrador, sin\u00f3 que cal anar equip per equip a modificar la configuraci\u00f3. Aquest proc\u00e9s de configuraci\u00f3 cal que es faci per a cada equip de la xarxa. Fer-lo manualment implica configurar equip per equip sense cometre errades en teclejar les adreces i les m\u00e0scares. Qualsevol canvi en l\u2019estructura de la xarxa, com per exemple redefinir les subxarxes o modificar algunes adreces IP, significa tornar a configurar manualment els equips implicats. Tant si la xarxa corporativa consta de pocs equips com de molts, cal una soluci\u00f3 que permeti automatitzar la configuraci\u00f3 de xarxa de cada equip de manera centralitzada.</p> <p>Les opcions de configuraci\u00f3 de xarxa es poden assignar a cada equip est\u00e0ticament o es poden configurar de manera din\u00e0mica utilitzant DHCP. Com a administradors de xarxa, la gesti\u00f3 centralitzada que ens proporciona DHCP ens permet modificar la xarxa afegint, eliminant i redefinint, equips amb un cost m\u00ednim.</p>"},{"location":"2_configuraci_dels_equips_de_la_xarxa/#tipus-dassignacions-dadreces-ip","title":"Tipus d'assignacions d'adreces IP","text":"<p>Cada equip de xarxa t\u00e9 assignada una adre\u00e7a IP que l\u2019identifica de manera \u00fanica dins la xarxa. La composici\u00f3 de l\u2019adre\u00e7a IP i la m\u00e0scara determina la xarxa o subxarxa a la qual pertany. A m\u00e9s a m\u00e9s, es configuren altres par\u00e0metres de xarxa com la porta d\u2019enlla\u00e7 predeterminada, servidors DNS, etc. Aix\u00f2 es pot configurar manualment anant equip per equip i introduint aquesta informaci\u00f3.</p> <p>Quan l\u2019adre\u00e7a IP i els altres par\u00e0metres necessaris de configuraci\u00f3 de la xarxa es configuren equip per equip, manualment, es diu que tenen una configuraci\u00f3 IP est\u00e0tica.</p> <p>Quan la configuraci\u00f3 de xarxa d'un equip no es fa manualment i localment en l\u2019equip sin\u00f3 que es rep per mitj\u00e0 d\u2019un servidor DHCP, es diu que l\u2019equip utilitza una configuraci\u00f3 IP din\u00e0mica. Per realitzar configuracions de xarxa din\u00e0micament caldran un o m\u00e9s servidors de DHCP (a manera de redund\u00e0ncia) que proporcionaran la configuraci\u00f3 als equips clients (els que cal configurar). Per tant, ser\u00e0 una estructura client-servidor.</p> <p>Les adreces IP din\u00e0miques que rep el client les podem classificar en dues categories: assignaci\u00f3 din\u00e0mica d'interval i assignaci\u00f3 fixa.</p> <p>El servidor DHCP disposa d\u2019un interval d\u2019adreces que pot assignar als clients que demanen una adre\u00e7a IP. Quan el servidor assigna una adre\u00e7a qualsevol de l\u2019interval al client (a l\u2019atzar) es tracta d\u2019una assignaci\u00f3 din\u00e0mica d\u2019interval. El client no sap quina adre\u00e7a IP tindr\u00e0 i no hi ha manera de predir quina adre\u00e7a se li concedir\u00e0 en una futura configuraci\u00f3. A cada nova assignaci\u00f3 l\u2019adre\u00e7a IP pot ser diferent.</p> <p>Una assignaci\u00f3 fixa es produeix quan el servidor DHCP sempre assigna la mateixa adre\u00e7a al client. Per assignar sempre la mateixa adre\u00e7a IP al client cal que el servidor pugui identificar inequ\u00edvocament el client (per l\u2019adre\u00e7a MAC). El servidor disposa d\u2019una taula amb les correspond\u00e8ncies entre les adreces MAC i les adreces IP fixes.</p> <p>Quan la configuraci\u00f3 de xarxa d\u2019un equip es rep per mitj\u00e0 d\u2019un servidor DHCP es diu que utilitza una adre\u00e7a IP din\u00e0mica. Aquesta adre\u00e7a pot variar dins d\u2019un interval d\u2019adreces disponibles per al servidor DHCP o pot ser fixa. Si l'assignaci\u00f3 de la configuraci\u00f3 es fa per a sempre es diu que es fa una assignaci\u00f3 de configuraci\u00f3 IP autom\u00e0tica.</p> <p>Els avantatges de disposar d\u2019una IP fixa s\u00f3n que la vostra identificaci\u00f3 a Internet (la vostra adre\u00e7a IP) no varia i tothom us pot identificar sempre per la mateixa IP. Podeu proporcionar serveis a altres equips, els clients us identifiquen sempre amb la mateixa adre\u00e7a sense haver de recordar en cada moment quina adre\u00e7a IP teniu avui (com passa en el cas d\u2019una IP din\u00e0mica).</p> <p>Cal saber</p> <p>MAC: Cada interf\u00edcie de xarxa s\u2019identifica de manera \u00fanica f\u00edsicament per l\u2019adre\u00e7a MAC (media acces control, adre\u00e7a d\u2019acc\u00e9s al medi).</p>"},{"location":"2_configuraci_dels_equips_de_la_xarxa/#per-saber-mes","title":"Per saber m\u00e9s","text":"<p>Macchange: L\u2019ordre GNU permet (mascarade) emmascarar l\u2019adre\u00e7a MAC pr\u00f2pia. Compte! No feu maldats.</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"3_el_model_funcional_dhcp/","title":"3. El model funcional DHCP","text":""},{"location":"3_el_model_funcional_dhcp/#3-el-model-funcional-dhcp","title":"3. El model funcional DHCP","text":"<p>El protocol DHCP utilitza UDP en la capa de transport. Utilitza dos ports:</p> <ul> <li>Port 67, on escolta el servidor.</li> <li>Port 68, on escolta el client.</li> </ul> <p>El protocol DHCP descriu el di\u00e0leg que es produeix entre client i servidor per a la concessi\u00f3 de configuracions IP. En una xarxa amb configuraci\u00f3 d\u2019equips din\u00e0mica, un o m\u00e9s servidors DHCP escoltaran les peticions dels clients en el port 67. Els clients DHCP sol\u00b7licitaran al servidor DHCP una configuraci\u00f3 IP, i comen\u00e7ar\u00e0 un proc\u00e9s de negociaci\u00f3 que ha d\u2019acabar (si tot va b\u00e9) amb la concessi\u00f3 d\u2019una adre\u00e7a IP al client. Els servidors parlen al port 68 dels clients.</p> <p>La negociaci\u00f3 que s\u2019estableix es pot definir a grans trets de la manera seg\u00fcent: 1. El client sol\u00b7licita una adre\u00e7a IP (de fet, una configuraci\u00f3 de xarxa). 2. El servidor mira les adreces IP disponibles dins de l\u2019interval d\u2019adreces din\u00e0miques de qu\u00e8 disposa per concedir i n\u2019ofereix una al client. 3. Si el client l\u2019accepta, envia una sol\u00b7licitud al servidor per fer-la seva. 4. Si al servidor li sembla b\u00e9, accepta la petici\u00f3 del client i li confirma que pot utilitzar aquesta IP, que la hi concedeix per un per\u00edode de temps limitat.</p>"},{"location":"3_el_model_funcional_dhcp/#udp-en-les-transmissions-dhcp","title":"UDP en les transmissions DHCP","text":"<p>L\u2019intercanvi d\u2019informaci\u00f3 entre client i servidor no \u00e9s gaire gran (poc volum de dades) i no requereix un flux permanent (una conversa continuada). \u00c9s per aix\u00f2 que el protocol que s\u2019utilitza en les transmissions DHCP \u00e9s l\u2019UDP.</p> <p>La concessi\u00f3 de l\u2019adre\u00e7a IP \u00e9s per un per\u00edode de temps establert pel servidor. Aix\u00f2 significa que, transcorregut aquest per\u00edode, el client haur\u00e0 de renegociar la concessi\u00f3 en un proc\u00e9s similar al descrit anteriorment.</p> <p>El proc\u00e9s real, per\u00f2, \u00e9s m\u00e9s detallat. El podem repassar: consta principalment de quatre parts: la petici\u00f3 del client o discovery, l\u2019oferta del servidor o offer, l\u2019acceptaci\u00f3 de l\u2019adre\u00e7a IP pel client o request, i la confirmaci\u00f3 del servidor o acknowledgement. A part d\u2019aquest tipus de missatges, el protocol DHCP en defineix d\u2019altres com el de petici\u00f3 d\u2019informaci\u00f3 o information i el d\u2019alliberament de l\u2019adre\u00e7a IP o releasing.</p>"},{"location":"3_el_model_funcional_dhcp/#tipus-de-paquets-dhcp","title":"Tipus de paquets DHCP:","text":"<ul> <li>DHCP discover</li> <li>DHCP offer</li> <li>DHCP request</li> <li>DHCP ack / DHCP nack</li> <li>DHCP decline</li> <li>DHCP release</li> <li>DHCP information</li> </ul>"},{"location":"3_el_model_funcional_dhcp/#diagrama-del-model-funcional-del-protocol-dhcp","title":"Diagrama del model funcional del protocol DHCP","text":"<pre><code>sequenceDiagram\nautonumber\nClient-&gt;&gt;Servidor: Discovery\nNote over Client,Servidor: Broadcast\nServidor--&gt;&gt;Client: Offer\nNote over Client,Servidor: Unicast\nClient-&gt;&gt;Servidor: Request\nNote over Client,Servidor: Broadcast\nServidor--&gt;&gt;Client: Acknowledge\nNote over Client,Servidor: Unicast</code></pre> <p>Font: IOC. Model funcional del protocol DHCP (CC BY-NC-SA)</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"4_intervals_exclusions_concessions_i_reserves/","title":"4. Intervals, exclusions, concessions i reserves","text":""},{"location":"4_intervals_exclusions_concessions_i_reserves/#4-intervals-exclusions-concessions-i-reserves","title":"4. Intervals, exclusions, concessions i reserves","text":"<p>Els clients DHCP obtenen del servidor una configuraci\u00f3 de xarxa. Descrivim ara alguns dels termes que tenen lloc durant aquest proc\u00e9s, i que formen part de la configuraci\u00f3 DHCP.</p> <p>Interval: anomenen interval d\u2019adreces IP el conjunt d\u2019adreces din\u00e0miques que el servidor t\u00e9 disponibles per assignar als clients. Les adreces IP disponibles s\u2019agrupen per oferir-se a les diverses subxarxes que at\u00e9n el servidor. Una mateixa subxarxa pot disposar de diversos intervals. Segurament s\u2019entendr\u00e0 m\u00e9s f\u00e0cilment amb un exemple:</p> <pre><code>subnet 140.220.191.0 netmask 255.255.255.0 {\n     range 140.220.191.150 140.220.191.249;\n}\nsubnet 239.252.197.0 netmask 255.255.255.0 {\n    range 239.252.197.10 239.252.197.107;\n    range 239.252.197.113 239.252.197.250;\n}\n</code></pre> <p>En l\u2019exemple anterior s\u2019observa que la primera subxarxa disposa d'un interval de 100 adreces din\u00e0miques (de la 140.220.191.150 al 250). La segona subxarxa permet assignar din\u00e0micament dos intervals d'adreces no correlatius.</p> <p>Exclusions: entenem per exclusions aquelles adreces IP que no s'ofereixen din\u00e0micament per part del servidor. \u00c9s a dir, que no formen part de cap interval.</p> <p>Concessions: l\u2019assignaci\u00f3 d\u2019una adre\u00e7a IP i la resta de par\u00e0metres de xarxa a un client per part del servidor, \u00e9s una concessi\u00f3 (o lease). Els clients reben les concessions per per\u00edodes de temps finits, que en finalitzar, cal renegociar. Tant el client com el servidor s\u2019anoten les concessions, el client la que rep i el servidor les que concedeix. Quan finalitza una concessi\u00f3 el servidor pot decidir revocar-la o ampliar-ne la concessi\u00f3.</p> <p>El client tothora pot decidir renunciar a la concessi\u00f3. Si el client vol allargar la concessi\u00f3 inicia un di\u00e0leg DHCP abreujat amb el servidor que pot acabar amb una renovaci\u00f3 o amb la p\u00e8rdua de la concessi\u00f3 (sempre pot tornar a comen\u00e7ar el proc\u00e9s). Tant el servidor com el client normalment miren les concessions que s\u2019han efectuat entre ells amb anterioritat per tal de, si \u00e9s possible, repetir la mateixa assignaci\u00f3.</p> <p>Reserves: anomenem reserves aquelles adreces IP que s\u2019assignen via DHCP per\u00f2 de manera fixa. \u00c9s a dir, s\u00f3n adreces que s\u2019assignen din\u00e0micament per\u00f2 sempre i \u00fanicament a un host determinat. Fixeu-vos que tot i ser una adre\u00e7a din\u00e0mica nom\u00e9s s\u2019utilitza si el host associat en fa \u00fas. Si el host est\u00e0 apagat l\u2019adre\u00e7a no es pot usar per a altres hosts, est\u00e0 reservada. Un exemple podria ser:</p> <pre><code>subnet 140.220.191.0 netmask 255.255.255.0 {\n    host iocserver {\n        hardware ethernet 08:00:2b:4c:59:23;\n        fixed-address 140.220.191.1;\n    }\n    range 140.220.191.150 140.220.191.249;\n}\n</code></pre> <p>En aquest exemple es pot veure que l'adre\u00e7a 140.220.191.1 \u00e9s una adre\u00e7a reservada exclusivament per al host iocserver, que s\u2019identifica mitjan\u00e7ant la seva adre\u00e7a MAC.</p> Activitat 2: Conceptes b\u00e0sics <p>Defineix en un document els seg\u00fcents conceptes:     - Interval     - Exclusions     - Concessions     - Reserves</p> Dades <p>Crea un fitxer de configuraci\u00f3 indicant exemples dels conceptes anteriors. La xarxa de treball ser\u00e0 la 192.168.10.0/24.</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"5__opcions_addicionals_del_protocol/","title":"5. Opcions addicionals del protocol","text":""},{"location":"5__opcions_addicionals_del_protocol/#5-opcions-addicionals-del-protocol","title":"5. Opcions addicionals del protocol","text":"<p>Recorda que el protocol DHCP proporciona la configuraci\u00f3 IP no sols una adre\u00e7a IP i la m\u00e0scara. Per a afegir nous par\u00e0metres s'utilitza la paraula reservada options.</p>"},{"location":"5__opcions_addicionals_del_protocol/#option-subnet-mask","title":"option subnet-mask","text":"<p>L'opci\u00f3 <code>subnet-mask</code> s'utilitza per especificar la m\u00e0scara de subxarxa que s'enviar\u00e0 al client, si s'omet s'enviaria la m\u00e0scara que va associada amb la declaraci\u00f3 subnet a la qual pertanyi la IP assignada. El normal \u00e9s ometre-per facilitar el manteniment del fitxer de configuraci\u00f3. La seva sintaxi \u00e9s la seg\u00fcent:</p> <p><code>option subnet-mask ip-address;</code></p> <p>Exemple: </p><pre><code>subnet 10.0.0.0 netmask 255.255.255.0 {\n   range 10.0.0.10 10.0.0.254;\n   option domain-name-servers 8.8.8.8, 8.8.4.4;\n   option routers 10.0.0.1;\n   option broadcast-address 10.0.0.255;\n   option subnet-mask 255.255.255.0;\n}\n</code></pre><p></p>"},{"location":"5__opcions_addicionals_del_protocol/#option-routers","title":"option routers","text":"<p>L'opci\u00f3 <code>routers</code> s'usa per enviar-li al client la seva porta d'enlla\u00e7. Pot especificar una IP num\u00e8rica o un nom. La seva sintaxi \u00e9s la seg\u00fcent:</p> <p><code>option routers ip-address;</code></p> <p>Exemple: </p><pre><code>subnet 10.0.0.0 netmask 255.255.255.0 {\n    range 10.0.0.10 10.0.0.254;\n    option domain-name-servers 8.8.8.8, 8.8.4.4;\n    option routers 10.0.0.1;\n}\n</code></pre><p></p>"},{"location":"5__opcions_addicionals_del_protocol/#option-domain-name-servers","title":"option domain-name-servers","text":"<p>L'opci\u00f3 <code>domain-name-servers</code> s'empra per enviar al client els servidors DNS que utilitzar\u00e0. La seva sintaxi \u00e9s la seg\u00fcent:</p> <p><code>option domain-name-servers ip-address [, ip-address ...];</code></p> <p>Els servidors s'han d'especificar per ordre de prefer\u00e8ncia, sent el primer de la llista el que s'utilitzar\u00e0 com a servidor DNS primari.</p> <p>Exemple: </p><pre><code>subnet 10.0.0.0 netmask 255.255.255.0 {\n    range 10.0.0.10 10.0.0.254;\n    option domain-name-servers 8.8.8.8, 8.8.4.4;\n}\n</code></pre><p></p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"6_problemes_del_servei/","title":"6. Problemes del servei","text":""},{"location":"6_problemes_del_servei/#6-problemes-del-servei","title":"6. Problemes del servei","text":""},{"location":"6_problemes_del_servei/#61-atacs-al-funcionament-de-dhcp-i-conflictes-dadreces-ip","title":"6.1. Atacs al funcionament de DHCP i conflictes d'adreces IP","text":"<p>Com tot servei de xarxa, el servidor DHCP \u00e9s susceptible de patir atacs mal intencionats. L\u2019atac m\u00e9s f\u00e0cil i cl\u00e0ssic \u00e9s el DoS o de denegaci\u00f3 de servei. Consisteix a inundar de peticions un servidor per tal de saturar-lo i bloquejar-ne el funcionament. Un client pot realitzar innumerables peticions DHCP discovery fingint que s\u00f3n clients diferents (emmascarant la seva MAC) amb la intenci\u00f3 d\u2019esgotar les adreces IP disponibles del servidor o simplement amb la intenci\u00f3 de sobrecarregar-lo amb tantes peticions que no done a l\u2019abast a atendre-les o que ho faci lentament.</p> <p>Un altre tipus d\u2019atac consisteix a falsejar la informaci\u00f3 que s\u2019envia al client (DHCP Spoofing). Recordem que el client fa una sol\u00b7licitud d\u2019IP en forma de difusi\u00f3 (broadcast) i la seva petici\u00f3 pot ser atesa per un o m\u00e9s servidors DHCP. Un dels servidors DHCP pot ser un atacant que intentar\u00e0 proporcionar informaci\u00f3 de configuraci\u00f3 falsa al client. Per exemple indicant un servidor DNS tamb\u00e9 malici\u00f3s. Aquest pot falsejar les identitats de les m\u00e0quines de la xarxa i, quan el client s\u2019adre\u00e7a a la seva entitat banc\u00e0ria, el servidor DNS en realitat li ha proporcionat una IP d\u2019una m\u00e0quina que falseja la de l\u2019entitat banc\u00e0ria. Perill\u00f3s, veritat?</p> <p>Per posar remei a la inseguretat en la comunicaci\u00f3 client-servidor DHCP, el protocol permet utilitzar mecanismes d\u2019autenticaci\u00f3 i xifratge. Aquests mecanismes queden fora de l\u2019abast d\u2019aquesta explicaci\u00f3.</p> <p>Esquema de funcionament del DHCP Spoofing: </p> <p>Font: IES Har\u00eda. Esquema de funcionament del DHCP Spoofing (CC BY-NC-SA)</p>"},{"location":"6_problemes_del_servei/#62-conflictes-amb-les-adreces-ip","title":"6.2. Conflictes amb les adreces IP","text":"<p>Un dels principals motius per utilitzar DHCP \u00e9s simplificar el proc\u00e9s de configuraci\u00f3 de xarxa i minimitzar els conflictes per encavalcament d\u2019adreces IP. Per desgr\u00e0cia, aix\u00f2 no garanteix que no es puguin produir conflictes. Per exemple, ens podem trobar en situacions en qu\u00e8 dues m\u00e0quines diferents tinguin la mateixa IP per una simple mala configuraci\u00f3 del servidor DHCP. Un altre cas t\u00edpic \u00e9s el d\u2019un client que s\u2019ha configurat ell mateix una IP est\u00e0tica quan en la xarxa ja hi havia un equip que utilitzava la mateixa adre\u00e7a IP assignada pel servidor DHCP.</p> <p>Un problema habitual per als administradors poc experimentats \u00e9s definir una configuraci\u00f3 de xarxa local al client (hostname, servidor DNS, porta d\u2019enlla\u00e7 a utilitzar, etc.), per\u00f2 demanar l\u2019adre\u00e7a IP din\u00e0micament. La configuraci\u00f3 din\u00e0mica no \u00e9s solament la IP i la m\u00e0scara, sin\u00f3 que el servidor DHCP pot proporcionar altres par\u00e0metres de xarxa que sobreescriuran els que el client tenia definits localment (aquest \u00e9s l\u2019objectiu de DHCP!).</p> <p>La configuraci\u00f3 rebuda per DHCP sobreescriu la configuraci\u00f3 local del client.</p>"},{"location":"6_problemes_del_servei/#63-diversos-servidors-dhcp-en-la-mateixa-xarxa","title":"6.3. Diversos servidors DHCP en la mateixa xarxa","text":"<p>Un altre dels problemes habituals \u00e9s que per error o maldat es connecte a la xarxa un altre servidor DHCP que responga primer a les peticions de DHCP Discover. En els entorns corporatius cal tindre control de qu\u00e8 es connecta a la xarxa per a evitar problemes. Aquests tipus d'escenaris es poden minimitzar indicant que el servidor \u00e9s autoritari en el segment de xarxa afectat.</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"activitats/","title":"Activitats","text":""},{"location":"activitats/#activitats","title":"Activitats","text":""},{"location":"activitats/#activitat-bloc-2","title":"Activitat: Bloc 2","text":"<ol> <li>Llista els quatre par\u00e0metres m\u00e9s importants de la configuraci\u00f3 d'una xarxa IP.</li> <li>Dibuixa i explica com es comuniquen client i servidor per a negociar una nova configuraci\u00f3 IP, indicant els ports involucrats, el nom del missatge, l\u2019emissor i el destinatari.</li> <li>Qu\u00e8 \u00e9s una concessi\u00f3? I una reserva?</li> <li>Indica quina de les seg\u00fcents afirmacions referents al servei DHCP \u00e9s vertadera:<ol> <li>Segueix el model client/servidor i utilitza els ports TCP 67 i 68.</li> <li>Permet assignar una adre\u00e7a IP a una m\u00e0quina concreta en funci\u00f3 de la seua MAC.</li> <li>Permet la resoluci\u00f3 de noms de host de forma din\u00e0mica.</li> <li>Utilitza un missatge de tipus DHCPACK en el que envia al client la confirmaci\u00f3 dels par\u00e0metres de configuraci\u00f3 de nom.</li> </ol> </li> <li>Qu\u00e8 \u00e9s Webmin? Explica la seua utilitat.</li> </ol>"},{"location":"activitats/#activitat-bloc-2_1","title":"Activitat: Bloc 2","text":"<ol> <li>Quins s\u00f3n els avantatges d\u2019utilitzar un servidor DHCP en una xarxa? Explica'ls.</li> <li>Quines difer\u00e8ncies hi ha entre una adre\u00e7a IP i una MAC?</li> <li>De quines formes podem assignar una adre\u00e7a IP amb DHCP? Explica-les.</li> <li>Qu\u00e8 indica cada l\u00ednia del seg\u00fcent arxiu de configuraci\u00f3 de DHCP? Excepte 1) i 2).</li> </ol> <pre><code>authoritative;\nserver-identifier 192.168.1.1;\ndefault-lease-time 86400;\nmax-lease-time 86400;\noption subnet-mask 255.255.255.0;\noption broadcast-address 192.168.1.255;\noption routers 192.168.1.1;\nsubnet 192.168.1.0 netmask 255.255.255.0\n{ \n    range 192.168.1.2 192.168.1.10; \n    option routers 192.168.1.254;\n}\nhost fantasia {\n    hardware ethernet AA:BB:CC:DD:EE:FF;\n    fixed-address 192.168.1.2; \n}\n</code></pre> <ol> <li>Investiga que signifiquen les l\u00ednies 1) i 2). Comprova-ho almenys en dos recursos.</li> <li>Quina informaci\u00f3 es guarda en el fitxer <code>/etc/network/interfaces</code>? Explica el seg\u00fcent fitxer.</li> </ol> <pre><code>auto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet dhcp\n\nauto eth1\niface eth1 inet static\naddress 192.168.1.5\nnetmask 255.255.255.0\ngateway 192.168.1.1\n</code></pre> <ol> <li>Si un servidor DHCP t\u00e9 configurat el seg\u00fcent interval 192.168.0.44 \u2013 192.168.0.244, quantes adreces IP t\u00e9 excloses?</li> <li> <p>Dels seg\u00fcents missatges quins envia el client i quins el servidor?</p> <ul> <li>DHCP Offer</li> <li>DHCP Release</li> <li>DHCP Discover</li> <li>DHCP Request</li> <li>DHCP Inform</li> <li>DHCP ACK</li> <li>DHCP NACK</li> </ul> </li> <li> <p>Amb les dades de l'exercici 4 escriu un fitxer <code>interfaces</code> que assigne una adre\u00e7a ip fixa a un nou equip.</p> </li> </ol> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"continguts/","title":"Continguts","text":""},{"location":"continguts/#continguts","title":"Continguts","text":"<p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"installaci_dun_servidor__dhcp/","title":"Instal\u00b7laci\u00f3 d'un servidor DHCP","text":""},{"location":"installaci_dun_servidor__dhcp/#installacio-dun-servidor-dhcp","title":"Instal\u00b7laci\u00f3 d'un servidor DHCP","text":"<p>Pots trobar la informaci\u00f3 b\u00e0sica de configuraci\u00f3 de la instal\u00b7laci\u00f3 i configuraci\u00f3 del DHCP en https://help.ubuntu.com/lts/serverguide/dhcp.html</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"objectius/","title":"Objectius","text":""},{"location":"objectius/#objectius","title":"Objectius","text":"<p>Instal\u00b7lar serveis de configuraci\u00f3 din\u00e0mica, descrivint les seves caracter\u00edstiques i aplicacions:</p> <ul> <li>Recon\u00e8ixer el funcionament dels mecanismes automatitzats de configuraci\u00f3 dels par\u00e0metres de xarxa.</li> <li>Identificar els avantatges que proporcionen.</li> <li>Il\u00b7lustrar els procediments i pautes que intervenen en una sol\u00b7licitud de configuraci\u00f3 dels par\u00e0metres de xarxa.</li> <li>Instal\u00b7lar un servei de configuraci\u00f3 din\u00e0mica dels par\u00e0metres de xarxa.</li> <li>Presentar el servei per assignar la configuraci\u00f3 b\u00e0sica als sistemes d\u2019una xarxa local.</li> <li>Realitzar assignacions din\u00e0miques i est\u00e0tiques.</li> <li>Recon\u00e8ixer les diferents topologies de xarxa.</li> <li>Verificar la correcta assignaci\u00f3 dels par\u00e0metres de configuraci\u00f3 de la xarxa.</li> <li>Realitzar la documentaci\u00f3 adient per donar suport a l\u2019usuari.</li> </ul> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"},{"location":"prctiques/","title":"Pr\u00e0ctiques","text":""},{"location":"prctiques/#practiques","title":"Pr\u00e0ctiques","text":""},{"location":"prctiques/#cas-practic","title":"Cas pr\u00e0ctic","text":"<p>Donat el seg\u00fcent esquema i suposant que l'enrutador d'internet disposa d'un servei DHCP funcional, crea el fitxer de configuraci\u00f3 de DHCP perqu\u00e8 hi haja:</p> <p></p> <p>Llic\u00e8ncia: CC BY-NC-SA</p> <p>a. 20 adreces IP excloses. b. Una reserva per al commutador. c. La resta formaran part de l'interval d'assignaci\u00f3 din\u00e0mica. d. Una vegada creat el fitxer de configuraci\u00f3 les adreces IP de l'esquema ser\u00e0 un dels escenaris possibles. e. El temps per defecte de connexi\u00f3 ser\u00e0 de 20 minuts i el m\u00e0xim 50. f. Escriu el fitxer de configuraci\u00f3 <code>interfaces</code> de l\u2019enrutador d\u2019Internet. Suposem que \u00e9s un equip amb Ubuntu.</p> <pre><code># Exemple b\u00e0sic de configuraci\u00f3 dhcpd.conf \nsubnet 192.168.1.0 netmask 255.255.255.0 \n{ \n    range 192.168.1.11 192.168.1.29; \n    option domain-name-servers 192.168.1.1, 193.146.96.2, 193.146.96.3; \n    option domain-name \"uimagen.iaf\"; \n    option routers 192.168.1.1; \n    option subnet-mask 255.255.255.0; \n    option broadcast-address 192.168.1.255;\n    default-lease-time 86400; \n    max-lease-time 172800; \n    host apache \n    { \n        hardware ethernet 00:10:5a:f1:35:87; \n        fixed-address 192.168.1.3; \n    } \n} \n</code></pre> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement CompartirIgual 4.0</p>"}]}